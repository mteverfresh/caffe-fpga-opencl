package require -exact qsys 12.1
set_validation_property AUTOMATIC_VALIDATION false

add_instance net_system net_system

add_connection acl_iface.kernel_clk net_system.clock_reset
add_connection acl_iface.kernel_clk2x net_system.clock_reset2x
add_connection acl_iface.kernel_reset net_system.clock_reset_reset

add_connection net_system.avm_memgmem0_port_0_0_rw acl_iface.kernel_mem0
add_connection net_system.avm_memgmem0_port_1_0_rw acl_iface.kernel_mem1
add_connection acl_iface.kernel_irq net_system.kernel_irq

add_instance cra_root cra_ring_root
set_instance_parameter_value cra_root DATA_W 64
set_instance_parameter_value cra_root ADDR_W 5
set_instance_parameter_value cra_root ID_W 3
add_connection acl_iface.kernel_clk cra_root.clock
add_connection acl_iface.kernel_reset cra_root.reset
add_connection acl_iface.kernel_cra cra_root.cra_slave
set_connection_parameter_value acl_iface.kernel_cra/cra_root.cra_slave baseAddress "0x0"
add_instance avs_convLayer_cra_cra_ring cra_ring_node
set_instance_parameter_value avs_convLayer_cra_cra_ring DATA_W 64
set_instance_parameter_value avs_convLayer_cra_cra_ring RING_ADDR_W 5
set_instance_parameter_value avs_convLayer_cra_cra_ring CRA_ADDR_W 5
set_instance_parameter_value avs_convLayer_cra_cra_ring ID_W 3
set_instance_parameter_value avs_convLayer_cra_cra_ring ID 0
add_connection acl_iface.kernel_clk avs_convLayer_cra_cra_ring.clock
add_connection acl_iface.kernel_reset avs_convLayer_cra_cra_ring.reset
add_connection cra_root.ring_out avs_convLayer_cra_cra_ring.ring_in
add_connection avs_convLayer_cra_cra_ring.cra_master net_system.avs_convLayer_cra
set_connection_parameter_value avs_convLayer_cra_cra_ring.cra_master/net_system.avs_convLayer_cra baseAddress "0x0"
add_instance avs_dataLayer_cra_cra_ring cra_ring_node
set_instance_parameter_value avs_dataLayer_cra_cra_ring DATA_W 64
set_instance_parameter_value avs_dataLayer_cra_cra_ring RING_ADDR_W 5
set_instance_parameter_value avs_dataLayer_cra_cra_ring CRA_ADDR_W 5
set_instance_parameter_value avs_dataLayer_cra_cra_ring ID_W 3
set_instance_parameter_value avs_dataLayer_cra_cra_ring ID 1
add_connection acl_iface.kernel_clk avs_dataLayer_cra_cra_ring.clock
add_connection acl_iface.kernel_reset avs_dataLayer_cra_cra_ring.reset
add_connection avs_convLayer_cra_cra_ring.ring_out avs_dataLayer_cra_cra_ring.ring_in
add_connection avs_dataLayer_cra_cra_ring.cra_master net_system.avs_dataLayer_cra
set_connection_parameter_value avs_dataLayer_cra_cra_ring.cra_master/net_system.avs_dataLayer_cra baseAddress "0x0"
add_instance avs_outputLayer_cra_cra_ring cra_ring_node
set_instance_parameter_value avs_outputLayer_cra_cra_ring DATA_W 64
set_instance_parameter_value avs_outputLayer_cra_cra_ring RING_ADDR_W 5
set_instance_parameter_value avs_outputLayer_cra_cra_ring CRA_ADDR_W 5
set_instance_parameter_value avs_outputLayer_cra_cra_ring ID_W 3
set_instance_parameter_value avs_outputLayer_cra_cra_ring ID 2
add_connection acl_iface.kernel_clk avs_outputLayer_cra_cra_ring.clock
add_connection acl_iface.kernel_reset avs_outputLayer_cra_cra_ring.reset
add_connection avs_dataLayer_cra_cra_ring.ring_out avs_outputLayer_cra_cra_ring.ring_in
add_connection avs_outputLayer_cra_cra_ring.cra_master net_system.avs_outputLayer_cra
set_connection_parameter_value avs_outputLayer_cra_cra_ring.cra_master/net_system.avs_outputLayer_cra baseAddress "0x0"
add_instance avs_paddingLayer_cra_cra_ring cra_ring_node
set_instance_parameter_value avs_paddingLayer_cra_cra_ring DATA_W 64
set_instance_parameter_value avs_paddingLayer_cra_cra_ring RING_ADDR_W 5
set_instance_parameter_value avs_paddingLayer_cra_cra_ring CRA_ADDR_W 5
set_instance_parameter_value avs_paddingLayer_cra_cra_ring ID_W 3
set_instance_parameter_value avs_paddingLayer_cra_cra_ring ID 3
add_connection acl_iface.kernel_clk avs_paddingLayer_cra_cra_ring.clock
add_connection acl_iface.kernel_reset avs_paddingLayer_cra_cra_ring.reset
add_connection avs_outputLayer_cra_cra_ring.ring_out avs_paddingLayer_cra_cra_ring.ring_in
add_connection avs_paddingLayer_cra_cra_ring.cra_master net_system.avs_paddingLayer_cra
set_connection_parameter_value avs_paddingLayer_cra_cra_ring.cra_master/net_system.avs_paddingLayer_cra baseAddress "0x0"
add_instance avs_poolingLayer_cra_cra_ring cra_ring_node
set_instance_parameter_value avs_poolingLayer_cra_cra_ring DATA_W 64
set_instance_parameter_value avs_poolingLayer_cra_cra_ring RING_ADDR_W 5
set_instance_parameter_value avs_poolingLayer_cra_cra_ring CRA_ADDR_W 5
set_instance_parameter_value avs_poolingLayer_cra_cra_ring ID_W 3
set_instance_parameter_value avs_poolingLayer_cra_cra_ring ID 4
add_connection acl_iface.kernel_clk avs_poolingLayer_cra_cra_ring.clock
add_connection acl_iface.kernel_reset avs_poolingLayer_cra_cra_ring.reset
add_connection avs_paddingLayer_cra_cra_ring.ring_out avs_poolingLayer_cra_cra_ring.ring_in
add_connection avs_poolingLayer_cra_cra_ring.cra_master net_system.avs_poolingLayer_cra
set_connection_parameter_value avs_poolingLayer_cra_cra_ring.cra_master/net_system.avs_poolingLayer_cra baseAddress "0x0"
add_instance avs_reluLayer_cra_cra_ring cra_ring_node
set_instance_parameter_value avs_reluLayer_cra_cra_ring DATA_W 64
set_instance_parameter_value avs_reluLayer_cra_cra_ring RING_ADDR_W 5
set_instance_parameter_value avs_reluLayer_cra_cra_ring CRA_ADDR_W 5
set_instance_parameter_value avs_reluLayer_cra_cra_ring ID_W 3
set_instance_parameter_value avs_reluLayer_cra_cra_ring ID 5
add_connection acl_iface.kernel_clk avs_reluLayer_cra_cra_ring.clock
add_connection acl_iface.kernel_reset avs_reluLayer_cra_cra_ring.reset
add_connection avs_poolingLayer_cra_cra_ring.ring_out avs_reluLayer_cra_cra_ring.ring_in
add_connection avs_reluLayer_cra_cra_ring.cra_master net_system.avs_reluLayer_cra
set_connection_parameter_value avs_reluLayer_cra_cra_ring.cra_master/net_system.avs_reluLayer_cra baseAddress "0x0"
add_connection avs_reluLayer_cra_cra_ring.ring_out cra_root.ring_in


save_system
